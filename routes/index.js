/* * GET home page. */Post = require('../models/post.js')var timelines;module.exports = function(app){  app.get('/', function(req, res){      Post.getArchieve(function(err, posts){          timelines = posts;                res.render('index', {               title: 'Litmus Blog',               timelines:timelines,          });      });  });  app.get('/blog', function(req, res){        var page = req.query.p;      if(!page) page = 1;      else page = parseInt(page);      Post.getTen(page, function(err, posts){          if (err) posts = [];                  res.render('blog', {              title:'Blog',              page:page,              posts:posts,              postsLen:posts.length,              timelines:timelines,          });      });  });    app.get('/blog/:title', function(req, res){      Post.getOne(req.params.title, function(err, posts){          if (err) posts = [];          res.render('article', {              title:req.params.title,              posts:posts,              timelines:timelines,          });      });  });  app.get('/post', function(req, res){      res.render('post', {          timelines:timelines,          title:'New Blog',      });  });  app.post('/post', function(req, res){      var html = markdown.makeHtml(req.body.post);            var post = new Post(req.body.title, html);      if (req.body.title.length || req.body.post) {          post.save(function(err) {              return res.redirect('/blog');          });      }   });};